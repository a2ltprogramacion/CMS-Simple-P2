# public/admin/config.yml (VERSIÓN 6.4 - Fix Colección Footer)
backend:
  name: git-gateway
  branch: main
  squash_merges: true

media_folder: "public/assets/uploads"
public_folder: "/assets/uploads"
display_url: https://elevawod.netlify.app  

collections:

  # 1. Ajustes SEO Y Marca
  - name: 'ajustes'
    label: 'Ajustes Globales y SEO (Home)'
    files:
      - file: "src/content/ajustes/home.yml"
        label: "Ajustes Globales y SEO (Home)" 
        name: "global_settings"
        fields:
          - {label: "Nombre de la Marca", name: "brand_name", widget: "string", required: true, hint: "Nombre de la Empresa o Marca."}
          - {label: "Título SEO (Home)", name: "title", widget: "string"}
          - {label: "Meta Descripción (Home)", name: "description", widget: "text"}
          - {label: "URL Canónica (Home)", name: "canonical_url", widget: "string", required: false}
          - {label: "Meta Robots (Home)", name: "robots", widget: "string", required: false}
          - {label: "Open Graph (Home)", name: "og", widget: "object", required: false, fields: [
              {label: "Título OG", name: "title", widget: "string", required: false},
              {label: "Descripción OG", name: "description", widget: "text", required: false},
              {label: "Imagen OG", name: "image", widget: "image", required: false}
            ]}

  # 2. Contenido del home
  - name: 'home_content'
    label: 'Contenido Página Principal (Secciones)'
    files:
      - file: "src/content/pages/home.md"
        label: "Contenido de la Home"
        name: "home_page"
        fields:
          - {label: "Plantilla", name: "template", widget: "hidden", default: "home"}
          - {label: "Sección Hero", name: "hero", widget: "object", required: false, fields: [
              {label: "Mostrar Sección", name: "show_section", widget: "boolean", default: true},
              {label: "Título (Hero)", name: "title", widget: "markdown", required: false},
              {label: "Subtítulo (Hero)", name: "subtitle", widget: "markdown", required: false},
              {label: "Descripción (Hero)", name: "description", widget: "markdown", required: false},
              {label: "CTA Texto (Botón)", name: "cta_text", widget: "string", required: false},
              {label: "CTA URL (Link)", name: "cta_url", widget: "string", required: false},
              {label: "Logo Blanco (Superpuesto)", name: "image_logo", widget: "image", required: false, hint: "Imagen/Logo principal que se superpone."},
              {label: "Imagen Principal (Fondo)", name: "image_main", widget: "image", required: false, hint: "Imagen de fondo con transparencia."}
            ]}
          - label: "Bloque Cualidades de Marca (Acordeón)"
            name: "cualidades_marca"
            widget: "object"
            required: false
            fields:
              - {label: "Mostrar Sección", name: "show_section", widget: "boolean", default: true}
              - label: "Tarjetas de Cualidades"
                name: "items"
                widget: "list"
                min: 3
                max: 4
                fields:
                  - {label: "Título (Cualidad)", name: "title", widget: "string", required: true}
                  - {label: "Descripción Corta", name: "description", widget: "string", required: true}
                  - {label: "Imagen de Fondo (Acordeón)", name: "image_fondo", widget: "image", required: true, hint: "Imagen principal que se mostrará al expandir."}
                  - {label: "Icono (Opcional, sin uso actual)", name: "icon", widget: "image", required: false}
          - label: "Sección Nosotros (Misión/Visión)"
            name: "nosotros"
            widget: "object"
            required: false
            fields:
              - {label: "Mostrar Sección", name: "show_section", widget: "boolean", default: true}
              - {label: "Imagen/Logo (Grid)", name: "image", widget: "image", required: false}
              - {label: "Título", name: "title", widget: "markdown", required: false}
              - {label: "Subtítulo", name: "subtitle", widget: "markdown", required: false}
              - {label: "Descripción Principal", name: "description", widget: "markdown", required: false, hint: "Texto en la barra superpuesta."}
              - {label: "Título Misión", name: "mision_title", widget: "string", required: false}
              - {label: "Texto Misión", name: "mision_text", widget: "markdown", required: false}
              - {label: "Título Visión", name: "vision_title", widget: "string", required: false}
              - {label: "Texto Visión", name: "vision_text", widget: "markdown", required: false}
          - label: "Sección Productos (Home)"
            name: "productos"
            widget: "object"
            required: false
            fields:
              - {label: "Mostrar Sección", name: "show_section", widget: "boolean", default: true}
              - {label: "Título (Productos)", name: "title", widget: "text", required: false}
              - {label: "Subtítulo (Productos)", name: "subtitle", widget: "text", required: false}
          - {label: "Sección Proyectos (Home)", name: "proyectos", widget: "object", required: false, fields: [
              {label: "Mostrar Sección", name: "show_section", widget: "boolean", default: true},
              {label: "Título (Proyectos)", name: "title", widget: "text", required: false},
              {label: "Subtítulo (Proyectos)", name: "subtitle", widget: "text", required: false},
              {label: "Proyectos Destacados (Selección Manual)", name: "lista_destacados", widget: "relation", collection: "proyectos", multiple: true, required: false, search_fields: ["titulo", "client_name"], value_field: "titulo", display_fields: ["titulo"], hint: "Selecciona los proyectos que quieres mostrar en el Home. (Recomendado: 6)"}
            ]}
          - label: "Sección Clientes (Home)"
            name: "clientes"
            widget: "object"
            required: false
            fields:
              - {label: "Mostrar Sección", name: "show_section", widget: "boolean", default: true}
              - {label: "Título (Clientes)", name: "title", widget: "text", required: false}
              - label: "Clientes Destacados (Rejilla 3x4)"
                name: "lista_destacados"
                widget: "relation"
                collection: "clientes"
                multiple: true
                required: false
                search_fields: ["titulo"]
                value_field: "titulo"
                display_fields: ["titulo"]
                hint: "Selecciona los 12 clientes que quieres mostrar en la rejilla 3x4."
              - {label: "Mostrar Scroller Infinito (4ta fila)", name: "show_scroller", widget: "boolean", default: true}
          - {label: "Sección Testimonios (Carrusel)", name: "testimonios", widget: "object", required: false, fields: [
              {label: "Mostrar Sección", name: "show_section", widget: "boolean", default: true},
              {label: "Título (Testimonios)", name: "title", widget: "text", required: false},
              {label: "Lista de Testimonios", name: "lista", widget: "list", required: false, fields: [
                  {label: "Texto del Testimonio", name: "quote", widget: "markdown", required: true},
                  {label: "Autor", name: "author", widget: "text", required: false},
                  {label: "Google Review Embed (HTML)", name: "google_review_embed", widget: "text", required: false}
                ]}
            ]}

  # 3. Colección de Productos
  - {name: 'productos', label: 'Colección de Productos', folder: 'src/content/productos', create: true, slug: '{{slug}}', identifier_field: 'title', fields: [
      {label: "Nombre del Producto", name: "title", widget: "text", required: true},
      {label: "Subtítulo (Miniatura)", name: "subtitle", widget: "text", required: false},
      {label: "Descripción Completa", name: "description", widget: "markdown", required: false},
      {label: "Imagen Principal (Nítida)", name: "image", widget: "image", required: false}
    ]}

  # 4. Colección de Proyectos
  - {name: 'proyectos', label: 'Proyectos / Portafolio', folder: 'src/content/proyectos', create: true, slug: '{{slug}}', identifier_field: 'titulo', fields: [
      {label: "Slug (URL Amigable)", name: "slug", widget: "string", hint: "Parte final de la URL, ej: mi-primer-proyecto.", required: true},
      {label: "Cliente (Línea 1 Tarjeta)", name: "client_name", widget: "text", required: true},
      {label: "Título del Proyecto (Línea 2 Tarjeta)", name: "titulo", widget: "text", required: true},
      {label: "Servicios Realizados", name: "services_list", widget: "relation", collection: "productos", multiple: true, search_fields: ["title"], value_field: "title", display_fields: ["title"], required: false, hint: "ACTUALIZADO: Relacionar con Productos."},
      {label: "Fecha", name: "date", widget: "datetime", time_format: false, date_format: "YYYY-MM-DD", required: false},
      {label: "Resumen (Descripción Tarjeta)", name: "summary", widget: "markdown", required: false, hint: "Descripción con fondo gris en la tarjeta."},
      {label: "Contenido Detallado (Página Interna)", name: "project_details", widget: "markdown", required: false},
      {label: "Galería de Fotos (Página Interna)", name: "gallery", widget: "list", required: false, fields: [{label: "Imagen", name: "image_path", widget: "image"}]}
    ]}

  # 5. Colección de Clientes
  - {name: 'clientes', label: 'Colección de Clientes', folder: 'src/content/clientes', create: true, slug: '{{slug}}', identifier_field: 'titulo', fields: [
      {label: "Slug (URL Amigable)", name: "slug", widget: "string", hint: "ej: nombre-cliente", required: true},
      {label: "Nombre del Cliente (Identificador)", name: "titulo", widget: "string", required: true},
      {label: "Logo del Cliente", name: "logo", widget: "image", required: true},
      {label: "Sitio Web (Opcional)", name: "url", widget: "string", required: false}
    ]}

  # 6. Información de Contacto
  - {name: 'informacion-de-contacto', label: 'Información de Contacto', files: [
      {file: "src/content/informacion-de-contacto/general.yml", label: "Información General de Contacto", name: "general", fields: [
          {label: "Número de WhatsApp", name: "whatsapp", widget: "string", required: false},
          {label: "Teléfono", name: "phone", widget: "string", required: false},
          {label: "Correo Electrónico", name: "email", widget: "string", required: false},
          {label: "Dirección", name: "address", widget: "markdown", required: false},
          {label: "Logo para Footer", name: "logo_footer", widget: "image", required: false, hint: "Imagen o logo decorativo en la parte inferior."},
          {label: "Descripción para Footer", name: "footer_description", widget: "text", required: false, hint: "Texto descriptivo que aparece en el footer."},
          {label: "Título sección Contacto", name: "contact_heading", widget: "text", required: false},
          {label: "Subtítulo sección Contacto", name: "contact_subheading", widget: "text", required: false},
          {label: "Mensaje por defecto para WhatsApp", name: "whatsapp_message", widget: "text", required: false},
          {label: "Mostrar sección de contacto", name: "show_contact_section", widget: "boolean", default: true},
          {label: "Redes Sociales", name: "social_media", widget: "object", required: false, fields: [
            {label: "Facebook URL", name: "facebook", widget: "string", required: false},
            {label: "Instagram URL", name: "instagram", widget: "string", required: false},
            {label: "Twitter URL", name: "twitter", widget: "string", required: false},
            {label: "LinkedIn URL", name: "linkedin", widget: "string", required: false},
            {label: "YouTube URL", name: "youtube", widget: "string", required: false}
          ]}
        ]}
    ]}
  
  # 7. Navegación del Footer (CORREGIDO V6.4)
  - name: 'footer_navigation'
    label: 'Navegación del Footer'
    files:
      - file: "src/content/footer_navigation/main.yml"
        label: "Columnas de Navegación del Footer"
        name: "main"
        fields:
          - label: "Columnas de Enlaces"
            name: "columns"
            widget: "list"
            # Esta es la definición de UNA columna
            fields:
              - {label: "Título de Columna", name: "title", widget: "string"}
              - label: "Enlaces de esta Columna"
                name: "links"
                widget: "list"
                fields:
                  - {label: "Texto del Enlace", name: "text", widget: "string"}
                  - {label: "URL del Enlace", name: "url", widget: "string"}
  
  # 8. Páginas Legales
  - name: 'legal'
    label: 'Páginas Legales (Políticas, etc.)'
    folder: 'src/content/legal'
    create: true
    slug: '{{slug}}'
    identifier_field: 'title'
    fields:
      - {label: "Título del Documento", name: "title", widget: "string", required: true}
      - {label: "Contenido (Markdown)", name: "body", widget: "markdown", required: true}